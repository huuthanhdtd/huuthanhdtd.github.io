<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>HuuThanhDTD</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="HuuThanhDTD">
<meta property="og:url" content="http://huuthanhdtd.com/index.html">
<meta property="og:site_name" content="HuuThanhDTD">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HuuThanhDTD">
  
    <link rel="alternate" href="/atom.xml" title="HuuThanhDTD" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">HuuThanhDTD</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://huuthanhdtd.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Thuat-toan-Donald-Knuth" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/29/Thuat-toan-Donald-Knuth/" class="article-date">
  <time datetime="2018-03-29T08:40:33.000Z" itemprop="datePublished">2018-03-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/29/Thuat-toan-Donald-Knuth/">Thuật toán, Donald Knuth</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Có lần <a href="https://en.wikiquote.org/wiki/Donald_Knuth" target="_blank" rel="noopener">Donald Knuth</a> nói trong một lần phỏng vấn đại ý là ông chưa thấy một chương trình nào (của người khác) mà ông không làm cho nó nhanh hơn 10 lần được.</p>
<p>Một trong những điểm đặc biệt của Knuth là ông rất tỉ mỉ khi phân tích giải thuật. Tỉ mỉ đến từng đơn vị thời gian. Chính vì thế mà hầu hết code trong TAoCP của ông được viết trên MMIX, ngôn ngữ bậc rất thấp, vì với chương trình viết trên MMIX, ông có thể đếm được số lệnh cơ bản trong chương trình mà ông thiết kể để minh họa cho tính tối ưu của nó.</p>
<p>Trong sách TAoCP (Vol 3) của ông có một ví dụ như thế này mà mình rất thích. Ở đây mình minh họa bằng C (mình phải thừa nhận rằng cách minh họa này không hay lắm, nhưng tìm cách minh họa giống với MMIX không dễ).</p>
<p>Giả sử bạn có một danh sách liên kết có cấu trúc như sau:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">typdef <span class="class"><span class="keyword">struct</span> <span class="title">llnode</span> &#123;</span></span><br><span class="line">........<span class="keyword">int</span> key;</span><br><span class="line">........struct llnode *next;</span><br><span class="line">&#125; llnode;</span><br><span class="line"></span><br><span class="line">llnode *head;</span><br><span class="line">llnode *tail;</span><br></pre></td></tr></table></figure>
<p>Giờ bạn muốn kiểm tra xem trong danh sách này có khóa K hay không. Bạn có lẽ sẽ làm như sau:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">llnode *itr = head;</span><br><span class="line"><span class="keyword">while</span>(itr != null)&#123;</span><br><span class="line">........<span class="keyword">if</span>(itr-&gt;key == K)&#123;</span><br><span class="line">................<span class="built_in">printf</span>(<span class="string">"%d is in the list"</span>, K);</span><br><span class="line">................<span class="keyword">break</span>;</span><br><span class="line">.........&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">................iter = itr-&gt;next;</span><br><span class="line">.........&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Nhưng theo Knuth, chương trình này có thể làm nhanh hơn được. Nếu là bạn thì bạn sẽ làm thế nào?</p>
<p>#Đáp án<br>Hãy dừng ở đây nếu bạn muốn suy nghĩ thử cách của mình rồi đọc đáp án sau nhé<br>Cách Knuth đề xuất là thêm vào cuối danh sách một nút mới có khóa K cần tìm (mất thời gian O(1)) (chú ý trong câu hỏi mình có để nút llnode *tail). Sau khi thêm vào rồi, code có thể viết lại như sau:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">add a node of key K after tail;</span><br><span class="line">itr = head;</span><br><span class="line"><span class="keyword">while</span>(itr-&gt;key != K)&#123;</span><br><span class="line">........itr = itr-&gt;next</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(itr-&gt;next != null)&#123;</span><br><span class="line">.......<span class="built_in">printf</span>(<span class="string">"%d is in the list"</span>, K);</span><br><span class="line">&#125; </span><br><span class="line">remove the node after tail;</span><br></pre></td></tr></table></figure></p>
<p>So với code trước, ta không cần phải check null cho con trỏ itr vì K luôn ở trong danh sách mới. Do đó tiết kiệm được N phép so sánh cho mỗi lần tìm kiếm không thành công (N là chiều dài của danh sách) trong khi đó chỉ mất thêm O(1) phép tính cho việc thêm và xóa nút khỏi danh sách.</p>
<p>Enjoy!!!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://huuthanhdtd.com/2018/03/29/Thuat-toan-Donald-Knuth/" data-id="cjfc9su1w0000y4t2yig1uh45" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Thuat-toan-Donald-Knuth/">Thuật toán, Donald Knuth</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-コードは方法を語り、コメントは理由を語る" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/29/コードは方法を語り、コメントは理由を語る/" class="article-date">
  <time datetime="2018-03-29T07:07:19.000Z" itemprop="datePublished">2018-03-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/29/コードは方法を語り、コメントは理由を語る/">コードは方法を語り、コメントは理由を語る</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>私は<a href="https://blog.codinghorror.com/when-good-comments-go-bad/" target="_blank" rel="noopener">コードにコメントを書く際の哲学について書いた投稿の中</a>で、<strong>必要のないコメントこそが、最も優れたコメントだと書きました。</strong>この点についてもう少し説明させてください。まず、コードはコメントに頼らなくても理解できるようにできるだけ簡潔にする必要があります。コードだけではどうしても分かりにくい箇所のみ、コメントを書き込むようにしましょう。</p>
<p>これを念頭に置いて作業することで、読者を常に意識しながら、コードが書けるようになります。1985年に出版された名著『<a href="http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-7.html" target="_blank" rel="noopener">計算機プログラムの構造と解釈</a>』の、「第一版への前文」にも、この点について単刀直入に書かれています。</p>
<blockquote>
<p>プログラムは人が読めるように、そしてコンピュータがついでに実行できるように書くべきである。</p>
</blockquote>
<p>Donald E. Knuthも1984年に出版したエッセー『<a href="http://www-cs-faculty.stanford.edu/~uno/lp.html" target="_blank" rel="noopener">文芸的プログラミング</a>』（<a href="http://www.literateprogramming.com/knuthweb.pdf" target="_blank" rel="noopener">PDF</a>）の中で、同様のことを書いています。</p>
<blockquote>
<p>これまでのプログラム構築のあり方を変えてみましょう。コンピュータに指示を出すのではなく、コンピュータにしてほしいことを人間に説明することに注力するのです。</p>
</blockquote>
<blockquote>
<p><a href="http://ja.wikipedia.org/wiki/%E6%96%87%E8%8A%B8%E7%9A%84%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" target="_blank" rel="noopener">文芸的プログラミング</a>の実践者は読者への見せ方を一番に考える、いわば、エッセイストと言えるでしょう。彼らはまるで作家のようにシソーラスを片手に、変数の名前を注意深く選び、それぞれの変数の意図するところを伝え、分かりやすいプログラムを仕上げようと努めます。なぜなら文芸的プログラミングの概念とは、互いに補強しあうフォーマルな手法、インフォーマルな手法を取り混ぜながら、人間にとって最もわかりやすい秩序に従ったプログラムを導入することだからです。</p>
</blockquote>
<p>自分ではない他のプログラマが最初に確認し、実際のコンパイラ処理を実行するようなプログラムを書く場合、より多くのコメントで補足しておきたくなるものですが、実際はそのほとんどが不要なものです。こちらのブログでは、<a href="http://sd.jtimothyking.com/2006/12/15/does-bad-writing-reflect-poor-programming-skills/" target="_blank" rel="noopener">コメントをちょっとした補足として使う</a>という好例が紹介されています。</p>
<blockquote>
<p>これは、十分な資金を元に数年に渡って本番環境で展開され続けている、あるクローズドソースシステムのコード・スニペットです。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> _x = <span class="built_in">abs</span>(x - deviceInfo-&gt;position.x) / scale;</span><br><span class="line"><span class="keyword">int</span> directionCode;</span><br><span class="line"><span class="keyword">if</span> (<span class="number">0</span> &lt; _x &amp; x != deviceInfo-&gt;position.x) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">0</span> &gt; x - deviceInfo-&gt;position.x) &#123;</span><br><span class="line">        directionCode = <span class="number">0x04</span> <span class="comment">/*left*/</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">0</span> &lt; x - deviceInfo-&gt;position.x) &#123;</span><br><span class="line">        directionCode = <span class="number">0x02</span> <span class="comment">/*right*/</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>そしてこちらが、もっと読みやすいコードで書かれたバグフィックス版です。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> DIRECTIONCODE_RIGHT = <span class="number">0x02</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> DIRECTIONCODE_LEFT = <span class="number">0x04</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> DIRECTIONCODE_NONE = <span class="number">0x00</span>;</span><br><span class="line"><span class="keyword">int</span> oldX = deviceInfo-&gt;position.x;</span><br><span class="line"><span class="keyword">int</span> directionCode = (x &gt; oldX) ? DIRECTIONCODE_RIGHT : (x &gt; oldX) ? DIRECTIONCODE_LEFT : DIRECTIONCODE_NONE;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>コメントが多いからといって読みやすいコードになっている訳ではないことに注意してください。この例では全く違っていますよね。すでにお気づきかと思いますが、最初にあげたスニペットにあるコメントは、むしろコードをよりぐちゃぐちゃにしています。意味が付与されているシンボル名を代わりに使える場合は特に、コメントをほとんどつけなくても読みやすいコードになることもあります。</p>
</blockquote>
<p>コメントを書く必要がなくなるように、コードをリファクタリングしたりシンプルにしたりするチャンスはいくらでもあります。とはいえ、コードの中だけですべてを説明するにはどうしても限界があります。</p>
<p>どんなにシンプルかつ簡潔な分かりやすいコードだったとしても、それを完全に自己文書化することは不可能です。コメントがコードそのものに取って代わることは決してありません。<a href="http://acmqueue.com/modules.php?name=Content&amp;pa=showpage&amp;pid=290&amp;page=2" target="_blank" rel="noopener">Jef Raskin</a>の記事を確認してみてください。</p>
<p>プログラムが書かれた経緯や、メソッドを選択する際の根拠をコードから判断することはできません。なぜそのようなアプローチを取ったのかという理由を、コードが教えてくれることはないのです。そのため、下記のようなコメントは必要になります。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* データ集合の関係において、二分探索法は文字列検索アルゴリズム（BM法）よりも遅いということが分かっています。そのため、この問題は文字列の検索手法に影響がなさそうでしたが、より複雑でありながらも早いメソッドを使っています。 */</span></span><br></pre></td></tr></table></figure>
<p>あるデベロッパにとっては、完璧かつ明確なものであっても、背景を知らない他のデベロッパにとっては、理解し難いものです。コメントに関するアドバイスを熟考してみてください。</p>
<blockquote>
<p>以下が文字列を反転させるコードだということは、すでにご存じかと思います。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$string = join(<span class="string">''</span>,reverse(split(<span class="string">''</span>,$string)));</span><br></pre></td></tr></table></figure>
<p>では、次のコードをPerlファイルに書き込むのは、どのくらい難しいでしょうか。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Reverse the string</span></span><br></pre></td></tr></table></figure>
<p>実際は、全く難しくありません。プログラムがどう動くのかを伝えるのがコードで、なぜそれが動くのかを伝えるのがコメントです。どちらの場合でも、同僚のデベロッパを惑わすようなことはしないでください。</p>
<p>##著者:　Jeff Atwood<br>インドア派。Stack Exchange and Discourseの共同創設者。お断り： 自分でも何を話しているのかよく分かっていません。私については<a href="http://twitter.com/codinghorror" target="_blank" rel="noopener">http://twitter.com/codinghorror</a>をチェックしてください。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://huuthanhdtd.com/2018/03/29/コードは方法を語り、コメントは理由を語る/" data-id="cjfc9su230003y4t23grui3gs" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/29/hello-world/" class="article-date">
  <time datetime="2018-03-29T06:10:17.549Z" itemprop="datePublished">2018-03-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/29/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://huuthanhdtd.com/2018/03/29/hello-world/" data-id="cjfc9su220001y4t2yvf8dfj1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thuat-toan-Donald-Knuth/">Thuật toán, Donald Knuth</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Thuat-toan-Donald-Knuth/" style="font-size: 10px;">Thuật toán, Donald Knuth</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/03/29/Thuat-toan-Donald-Knuth/">Thuật toán, Donald Knuth</a>
          </li>
        
          <li>
            <a href="/2018/03/29/コードは方法を語り、コメントは理由を語る/">コードは方法を語り、コメントは理由を語る</a>
          </li>
        
          <li>
            <a href="/2018/03/29/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Jack N<br>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>